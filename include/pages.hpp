#include <Arduino.h>

const char MAIN_PAGE[] PROGMEM = R"rawliteral(
<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Retificador controlado</title>

		<style>
			body {
				width: 100%;
				height: 100vh;
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				background-color: rgb(115, 243, 200);
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
			}

			header {
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 1rem;
			}

			.ifal-logo {
				width: 100%;
				max-width: 13rem;
			}

			main {
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				padding: 2rem 1rem;
			}

			.form {
				padding-top: 1rem;
			}

			input {
				width: 11rem;
				padding: 0.3rem 0.5rem;
				outline: none;
				border-radius: 0.2rem;
				border: none;
			}

			button {
				padding: 0.3rem 0.6rem;
				outline: none;
				border-radius: 0.2rem;
				border: none;
				background-color: rgb(127, 193, 255);
				cursor: pointer;
			}

			.alert {
				display: none;
				margin-top: 1rem;
				padding: 0.5rem;
				border-radius: 0.2rem;
				background-color: rgb(224, 55, 55);
				color: white;
			}

			.waves {
				display: flex;
				gap: 5rem;
				padding-top: 2rem;
			}
		</style>
	</head>
	<body>
		<header>
			<svg
				version="1.0"
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 2418.000000 847.000000"
				preserveAspectRatio="xMidYMid meet"
				class="ifal-logo">
				<g
					transform="translate(0.000000,847.000000) scale(0.100000,-0.100000)"
					fill="#000000"
					stroke="none">
					<path
						d="M2194 6919 c-277 -31 -510 -251 -560 -529 -59 -329 143 -650 466
-739 91 -25 238 -28 325 -6 350 89 564 444 475 789 -81 318 -377 521 -706 485z" />
					<path
						d="M3143 6850 c-60 -36 -58 -20 -58 -572 0 -499 0 -507 21 -535 40 -53
31 -53 569 -53 538 0 529 0 569 53 21 28 21 36 21 537 0 501 0 509 -21 537
-40 53 -31 53 -569 53 -478 0 -501 -1 -532 -20z" />
					<path
						d="M4575 6860 c-11 -4 -31 -20 -45 -35 l-25 -27 0 -520 0 -520 37 -34
38 -34 505 0 c429 0 510 2 535 15 62 32 60 10 60 575 0 565 2 543 -60 575 -25
13 -104 15 -527 14 -274 0 -507 -4 -518 -9z" />
					<path
						d="M14450 5460 c-145 -17 -240 -61 -325 -151 -107 -112 -149 -242 -149
-459 0 -217 42 -347 149 -459 104 -109 225 -154 415 -154 189 0 315 47 413
153 111 120 150 239 150 460 0 160 -18 252 -69 351 -36 72 -122 160 -193 198
-98 52 -258 77 -391 61z m243 -243 c57 -34 91 -77 120 -153 18 -51 22 -80 22
-209 0 -171 -13 -228 -70 -306 -52 -72 -106 -94 -230 -94 -91 0 -104 2 -147
28 -58 34 -92 77 -121 153 -18 51 -22 80 -22 209 0 167 12 223 66 301 54 79
116 104 244 101 78 -2 98 -7 138 -30z" />
					<path
						d="M8620 5446 c-154 -45 -240 -148 -248 -301 -5 -104 19 -173 89 -249
40 -44 75 -68 172 -117 212 -108 247 -138 247 -216 0 -82 -55 -118 -180 -117
-72 1 -102 7 -200 41 -63 22 -123 43 -132 48 -17 7 -18 -2 -18 -109 l0 -117
43 -19 c129 -57 354 -72 482 -33 179 56 263 170 253 347 -9 155 -66 221 -297
340 -175 91 -211 123 -211 190 0 50 24 87 70 106 46 19 171 8 268 -25 96 -33
86 -39 133 78 22 54 29 81 21 89 -5 5 -50 24 -98 40 -78 27 -105 31 -219 34
-86 2 -145 -1 -175 -10z" />
					<path d="M6520 4850 l0 -600 125 0 125 0 0 600 0 600 -125 0 -125 0 0 -600z" />
					<path
						d="M7070 4850 l0 -600 116 0 117 0 -6 428 c-3 235 -9 437 -12 450 -21
68 35 -22 265 -426 l256 -447 162 -3 162 -2 0 600 0 600 -117 0 -116 0 5 -447
c3 -250 2 -440 -3 -432 -4 8 -120 208 -257 444 l-249 430 -162 3 -161 2 0
-600z" />
					<path
						d="M9230 5345 l0 -105 160 0 160 0 0 -495 0 -495 130 0 130 0 0 495 0
495 160 0 160 0 0 105 0 105 -450 0 -450 0 0 -105z" />
					<path d="M10310 4850 l0 -600 130 0 130 0 -2 598 -3 597 -127 3 -128 3 0 -601z" />
					<path
						d="M10750 5345 l0 -105 160 0 160 0 0 -495 0 -495 130 0 130 0 0 495 0
495 160 0 160 0 0 105 0 105 -450 0 -450 0 0 -105z" />
					<path
						d="M11820 5053 c0 -228 5 -426 11 -463 27 -169 132 -285 304 -336 74
-22 245 -24 325 -5 145 35 264 129 312 248 23 57 23 63 26 506 l3 447 -125 0
-125 0 -3 -422 c-3 -422 -3 -423 -27 -471 -36 -73 -82 -100 -187 -105 -134 -7
-203 30 -240 128 -15 39 -18 99 -22 458 l-4 412 -124 0 -124 0 0 -397z" />
					<path
						d="M12980 5345 l0 -105 160 0 160 0 0 -495 0 -495 125 0 125 0 2 493 3
492 163 3 163 2 -3 103 -3 102 -447 3 -448 2 0 -105z" />
					<path
						d="M15787 5443 c-4 -3 -7 -273 -7 -600 l0 -593 125 0 125 0 0 235 0 235
203 2 202 3 3 103 3 102 -206 0 -205 0 0 155 0 155 220 0 220 0 0 105 0 105
-338 0 c-186 0 -342 -3 -345 -7z" />
					<path
						d="M16700 4850 l0 -600 345 0 345 0 0 105 0 105 -220 0 -220 0 0 155 0
155 205 0 206 0 -3 103 -3 102 -202 3 -203 2 0 130 0 130 220 0 220 0 0 105 0
105 -345 0 -345 0 0 -600z" />
					<path
						d="M17638 5444 c-5 -4 -8 -275 -8 -602 l0 -594 253 5 c276 5 329 13 444
68 83 39 181 132 222 208 94 178 96 471 4 644 -40 75 -139 169 -216 206 -114
54 -168 63 -442 68 -137 3 -253 2 -257 -3z m540 -234 c70 -30 133 -101 158
-177 26 -80 27 -275 1 -352 -51 -151 -142 -210 -339 -219 l-108 -5 0 393 0
392 118 -4 c94 -4 128 -9 170 -28z" />
					<path
						d="M18870 4850 l0 -600 345 0 345 0 0 105 0 105 -220 0 -220 0 0 155 0
155 205 0 206 0 -3 103 -3 102 -202 3 -203 2 0 130 0 130 220 0 221 0 -3 103
-3 102 -342 3 -343 2 0 -600z" />
					<path
						d="M19800 4850 l0 -600 130 0 130 0 0 230 0 231 67 -3 66 -3 141 -227
141 -228 276 0 276 0 38 128 c21 70 42 135 47 145 8 15 29 17 218 17 189 0
210 -2 218 -17 5 -10 27 -75 48 -145 l38 -128 133 0 c73 0 133 3 133 8 0 4
-93 274 -207 599 l-208 593 -156 0 -155 0 -116 -332 c-64 -183 -158 -451 -209
-595 -50 -145 -96 -260 -101 -257 -10 6 -326 477 -334 497 -2 7 16 23 42 36
50 27 113 93 138 146 69 144 24 339 -97 422 -95 64 -201 82 -494 83 l-203 0 0
-600z m1540 387 c0 -7 32 -114 70 -239 39 -125 70 -232 70 -237 0 -7 -52 -11
-150 -11 -82 0 -150 2 -150 4 0 2 32 109 70 237 39 129 70 239 70 246 0 7 5
13 10 13 6 0 10 -6 10 -13z m-1047 -26 c53 -26 77 -67 77 -133 0 -105 -62
-151 -212 -156 l-98 -4 0 162 0 163 94 -5 c68 -4 106 -11 139 -27z" />
					<path
						d="M22057 5443 c-4 -3 -7 -273 -7 -600 l0 -593 370 0 370 0 0 105 0 105
-240 0 -240 0 0 495 0 495 -123 0 c-68 0 -127 -3 -130 -7z" />
					<path
						d="M1738 5424 c-58 -31 -58 -27 -58 -574 0 -551 -1 -537 60 -574 25 -14
83 -16 530 -16 447 0 505 2 530 16 61 37 60 23 60 574 0 550 1 544 -60 575
-43 22 -1021 22 -1062 -1z" />
					<path
						d="M3151 5427 c-13 -6 -34 -25 -45 -40 -21 -28 -21 -36 -21 -535 0 -552
-2 -536 58 -572 31 -19 55 -20 532 -20 484 0 501 1 533 20 62 38 62 39 62 570
0 521 0 525 -55 568 -28 22 -30 22 -534 22 -382 0 -512 -3 -530 -13z" />
					<path
						d="M1764 4029 c-16 -5 -41 -20 -55 -35 l-24 -26 0 -523 0 -523 24 -26
c14 -14 41 -30 60 -36 48 -13 954 -13 1002 0 19 6 46 22 60 36 l24 26 0 523 0
523 -24 26 c-14 14 -41 30 -60 36 -45 12 -964 12 -1007 -1z" />
					<path
						d="M3173 4033 c-34 -7 -71 -47 -83 -92 -7 -28 -10 -192 -8 -518 3 -424
5 -481 20 -508 33 -61 22 -60 577 -60 466 0 508 1 532 18 55 37 54 29 54 572
0 543 1 535 -54 572 -24 17 -67 18 -521 19 -272 1 -505 0 -517 -3z" />
					<path
						d="M4581 4027 c-19 -7 -44 -25 -55 -40 -21 -28 -21 -36 -21 -542 0 -506
0 -514 21 -542 11 -15 36 -33 55 -40 44 -15 956 -18 1011 -3 20 6 48 24 62 41
l26 31 0 512 c0 511 0 513 -22 541 -43 55 -47 55 -565 54 -343 0 -488 -3 -512
-12z" />
					<path d="M7430 3320 l0 -490 50 0 50 0 0 490 0 490 -50 0 -50 0 0 -490z" />
					<path
						d="M6867 3743 c-4 -6 -303 -773 -346 -885 l-11 -28 54 0 53 0 54 143 55
142 184 3 185 2 55 -145 55 -145 53 0 c28 0 52 3 52 8 0 4 -78 210 -174 457
l-174 450 -45 3 c-25 2 -47 -1 -50 -5z m162 -440 l30 -83 -144 0 c-80 0 -145
2 -145 5 0 2 27 75 59 162 32 87 64 178 71 201 l11 44 43 -124 c24 -67 58
-160 75 -205z" />
					<path
						d="M7902 3521 c-65 -17 -122 -43 -122 -56 0 -18 21 -65 29 -65 4 0 32 9
64 20 69 24 166 26 208 4 38 -19 59 -67 59 -132 l0 -49 -117 -6 c-137 -6 -206
-25 -262 -74 -49 -41 -64 -86 -59 -168 7 -113 80 -174 208 -175 92 0 136 15
189 65 l46 44 10 -47 c10 -45 12 -47 48 -50 l37 -3 -1 273 c-1 325 -6 347 -93
399 -32 18 -57 24 -125 26 -47 1 -101 -2 -119 -6z m238 -398 c0 -119 -53 -192
-154 -213 -108 -22 -177 18 -178 104 -1 26 5 58 13 72 26 50 120 78 272 83
l47 1 0 -47z" />
					<path
						d="M8564 3515 c-50 -19 -102 -68 -122 -115 -8 -19 -15 -64 -15 -100 -1
-77 25 -135 77 -175 l35 -27 -34 -30 c-43 -37 -54 -86 -31 -134 9 -19 23 -37
31 -40 10 -4 -3 -15 -38 -32 -106 -54 -129 -191 -46 -272 52 -50 105 -64 234
-65 142 0 212 18 276 73 51 44 69 85 69 157 0 60 -14 97 -52 132 -39 37 -78
46 -226 52 -128 5 -145 8 -158 26 -18 24 -11 61 17 91 17 18 35 22 107 26 93
5 147 25 189 70 54 57 69 167 33 245 l-19 42 60 7 59 7 0 33 0 34 -83 0 c-46
0 -137 2 -203 5 -92 4 -128 1 -160 -10z m206 -83 c76 -55 80 -209 7 -257 -35
-23 -114 -29 -162 -13 -57 19 -85 65 -85 141 0 43 6 69 21 93 11 19 21 34 22
34 1 0 20 7 42 15 49 18 120 12 155 -13z m34 -592 c77 -12 96 -30 96 -91 0
-87 -69 -136 -206 -146 -138 -11 -224 33 -224 113 0 67 35 108 105 125 45 10
162 10 229 -1z" />
					<path
						d="M9317 3516 c-139 -50 -203 -168 -195 -365 3 -90 8 -115 32 -163 52
-109 149 -168 276 -168 182 0 295 117 308 316 12 196 -71 343 -216 384 -51 14
-160 12 -205 -4z m197 -90 c43 -18 92 -78 105 -132 16 -61 14 -192 -4 -250
-26 -87 -90 -135 -180 -136 -133 -1 -198 70 -211 234 -11 131 32 244 108 281
41 20 137 22 182 3z" />
					<path
						d="M10070 3519 c-60 -17 -120 -41 -120 -49 0 -4 7 -23 15 -43 l14 -35
58 24 c43 17 77 24 132 24 69 0 75 -2 106 -33 27 -27 34 -44 40 -89 4 -31 4
-61 0 -67 -3 -6 -41 -11 -88 -11 -162 -1 -283 -44 -329 -117 -18 -30 -23 -52
-23 -103 0 -130 60 -190 196 -198 97 -6 154 13 210 69 41 41 40 41 54 -28 6
-31 9 -33 47 -33 l40 0 -4 278 c-3 264 -4 279 -25 319 -26 48 -62 76 -118 92
-48 13 -156 13 -205 0z m240 -412 c0 -115 -58 -185 -166 -202 -53 -8 -115 8
-140 36 -30 33 -27 129 5 163 36 39 124 61 254 65 l47 1 0 -63z" />
					<path
						d="M10723 3516 c-94 -30 -138 -91 -131 -181 8 -93 30 -111 266 -216 40
-18 82 -44 93 -57 38 -49 14 -122 -48 -143 -56 -20 -167 -15 -240 10 -34 11
-65 21 -68 21 -3 0 -5 -20 -5 -46 0 -43 2 -46 38 -61 49 -21 216 -29 279 -14
101 25 162 95 163 184 0 87 -52 146 -176 196 -137 55 -154 64 -179 87 -25 23
-32 63 -19 99 18 47 163 61 266 26 l56 -19 18 39 c10 24 14 43 8 49 -36 34
-240 51 -321 26z" />
					<path
						d="M1755 2596 c-16 -7 -39 -23 -50 -36 -19 -21 -20 -38 -23 -528 -3
-539 -2 -545 46 -582 24 -19 43 -20 542 -20 499 0 518 1 542 20 48 37 49 43
46 582 -3 490 -4 507 -23 528 -44 49 -52 50 -567 50 -378 -1 -489 -4 -513 -14z" />
					<path
						d="M3153 2594 c-70 -35 -68 -17 -71 -539 -2 -259 0 -490 3 -514 5 -32
16 -54 40 -78 l33 -33 511 0 c422 0 517 2 539 14 58 30 57 24 57 575 0 474 -1
509 -18 535 -37 55 -43 56 -574 56 -424 0 -492 -3 -520 -16z" />
					<path
						d="M14536 2354 c-9 -8 -16 -31 -16 -49 0 -41 22 -65 59 -65 35 0 61 28
61 67 0 54 -67 85 -104 47z" />
					<path
						d="M6830 2347 c-232 -66 -346 -287 -299 -577 19 -121 80 -223 167 -278
79 -51 148 -65 281 -59 64 3 133 10 154 16 36 12 37 14 37 58 0 44 -1 45 -27
39 -155 -32 -249 -31 -333 5 -57 25 -114 82 -141 144 -46 104 -46 286 0 391
28 62 93 128 154 155 70 31 195 32 281 1 33 -12 60 -21 61 -19 0 1 8 19 18 40
10 21 15 42 12 47 -23 37 -275 63 -365 37z" />
					<path
						d="M11983 2333 c-19 -52 -345 -879 -349 -885 -3 -5 19 -8 50 -8 l54 0
57 145 57 145 181 0 182 0 55 -142 56 -143 56 -3 56 -3 -178 453 -177 453 -47
3 c-37 3 -47 0 -53 -15z m133 -331 c35 -96 64 -175 64 -178 0 -2 -66 -4 -146
-4 -113 0 -145 3 -142 13 3 6 30 80 61 162 31 83 61 170 68 194 l13 44 9 -29
c5 -16 38 -107 73 -202z" />
					<path
						d="M7502 2120 c-36 -8 -122 -40 -122 -45 0 -6 30 -75 33 -75 1 0 27 9
57 19 90 31 144 36 196 16 52 -20 73 -53 81 -129 l5 -52 -128 -11 c-153 -13
-229 -38 -273 -88 -68 -77 -63 -204 11 -272 37 -35 92 -53 159 -53 84 0 132
16 184 62 24 21 46 35 48 31 3 -5 8 -25 12 -46 7 -35 9 -37 46 -37 l39 0 0
253 c0 291 -7 335 -65 386 -19 16 -51 35 -72 40 -43 12 -162 13 -211 1z m244
-412 c-13 -115 -58 -169 -157 -190 -129 -26 -207 49 -168 160 21 61 98 89 243
91 l89 1 -7 -62z" />
					<path
						d="M8265 2111 c-22 -10 -54 -33 -72 -51 l-31 -32 -7 46 -7 46 -44 0 -44
0 0 -340 0 -340 49 0 48 0 5 228 c5 246 11 278 65 334 46 48 171 57 219 17 41
-33 44 -59 44 -324 l0 -255 54 0 55 0 3 243 c3 221 5 245 23 276 27 46 64 71
117 81 88 17 158 -19 178 -89 5 -20 10 -143 10 -273 l0 -238 50 0 50 0 0 253
c0 194 -3 265 -15 303 -26 88 -97 134 -206 134 -87 0 -136 -18 -188 -68 -25
-24 -47 -39 -49 -33 -28 85 -200 131 -307 82z" />
					<path
						d="M9462 2118 c-18 -6 -52 -28 -76 -49 l-44 -39 -6 45 -7 45 -45 0 -44
0 2 -492 3 -493 50 0 50 0 0 196 0 197 40 -37 c51 -47 114 -65 203 -59 107 8
174 55 220 158 30 65 42 221 23 311 -17 82 -66 157 -125 194 -43 26 -60 30
-130 32 -45 1 -96 -3 -114 -9z m170 -94 c67 -34 102 -120 102 -249 -1 -189
-92 -286 -240 -255 -109 23 -149 104 -142 289 6 156 39 211 139 230 50 10 102
4 141 -15z" />
					<path
						d="M10883 2114 c-52 -19 -110 -81 -119 -128 -18 -97 33 -163 167 -216
182 -72 213 -97 207 -166 -2 -30 -10 -43 -36 -61 -65 -43 -161 -39 -320 12
-22 7 -23 6 -20 -41 l3 -48 55 -18 c33 -10 89 -17 141 -17 184 -2 279 64 279
194 0 99 -50 144 -249 221 -110 42 -148 87 -125 149 9 22 50 42 104 50 40 6
127 -7 206 -30 17 -5 23 1 36 34 16 39 16 39 -11 50 -89 34 -242 41 -318 15z" />
					<path
						d="M12762 2109 c-23 -12 -60 -42 -82 -68 l-40 -46 0 31 c0 17 -3 46 -6
63 -6 28 -10 31 -45 31 l-39 0 0 -340 0 -340 49 0 50 0 3 223 c3 206 5 225 25
263 42 79 117 121 200 111 48 -5 48 -5 58 56 l6 37 -68 0 c-49 0 -80 -6 -111
-21z" />
					<path
						d="M13192 2120 c-53 -12 -122 -41 -122 -50 0 -8 19 -58 26 -68 2 -2 27
5 56 16 112 41 201 37 248 -13 19 -20 25 -39 28 -88 l4 -63 -130 -11 c-141
-12 -204 -32 -256 -81 -85 -80 -72 -235 25 -299 36 -23 55 -29 121 -32 98 -4
151 14 207 71 23 22 41 34 41 27 0 -8 5 -31 11 -51 9 -35 13 -38 44 -38 l35 0
0 273 c0 244 -2 276 -19 313 -20 44 -56 74 -110 92 -38 13 -158 14 -209 2z
m238 -408 c0 -109 -62 -182 -168 -198 -96 -14 -162 32 -162 115 0 97 72 138
248 140 l82 1 0 -58z" />
					<path
						d="M13944 2106 c-28 -13 -60 -35 -71 -50 -27 -33 -33 -33 -33 3 0 50 -9
61 -51 61 l-39 0 0 -495 0 -495 50 0 51 0 -3 195 c-2 107 0 195 3 195 3 0 14
-10 25 -21 62 -70 216 -91 312 -43 91 45 135 118 153 252 26 197 -50 372 -180
410 -65 20 -159 15 -217 -12z m181 -76 c33 -13 66 -50 88 -99 29 -62 31 -223
4 -292 -34 -90 -111 -136 -205 -123 -60 9 -103 41 -132 99 -23 45 -25 62 -25
170 0 106 3 126 24 168 40 81 146 115 246 77z" />
					<path
						d="M15081 2119 c-36 -14 -95 -64 -111 -93 -21 -39 -29 -32 -32 32 l-3
57 -42 3 -43 3 0 -340 0 -341 49 0 50 0 3 218 c3 211 4 219 29 267 15 30 42
62 68 80 38 26 51 30 112 30 57 0 69 3 69 16 0 9 3 31 6 48 l7 31 -69 -1 c-38
0 -80 -5 -93 -10z" />
					<path
						d="M15492 2120 c-42 -10 -122 -40 -122 -46 0 -8 29 -74 32 -74 2 0 31
10 63 21 71 25 157 30 203 10 40 -17 60 -52 68 -124 l6 -54 -113 -8 c-194 -12
-289 -56 -325 -150 -31 -83 -1 -187 68 -233 33 -21 54 -26 124 -30 75 -4 89
-2 138 22 30 15 66 40 80 56 l24 29 12 -49 c12 -50 12 -50 52 -50 l40 0 -4
273 c-3 222 -6 278 -19 307 -22 47 -55 76 -108 95 -46 16 -162 19 -219 5z
m238 -410 c0 -106 -48 -168 -148 -191 -100 -23 -170 13 -179 92 -12 108 61
156 245 158 l82 1 0 -60z" />
					<path
						d="M16204 2114 c-57 -20 -120 -77 -149 -134 -48 -95 -57 -253 -19 -362
19 -58 83 -132 138 -160 52 -27 198 -36 266 -16 44 14 45 14 48 61 2 26 2 47
0 47 -2 0 -25 -7 -52 -15 -57 -17 -153 -20 -193 -4 -74 28 -114 100 -121 219
-6 105 14 184 59 235 48 54 144 70 243 41 l46 -14 16 36 c8 20 13 41 10 48
-12 33 -215 45 -292 18z" />
					<path
						d="M16815 2123 c-25 -5 -135 -44 -135 -48 0 -6 30 -75 33 -75 1 0 28 9
58 19 119 42 211 35 251 -20 12 -16 22 -50 25 -85 l5 -60 -128 -11 c-236 -21
-318 -77 -317 -219 1 -124 78 -194 214 -194 84 0 132 16 184 62 24 21 45 38
48 38 3 0 8 -20 11 -45 7 -45 8 -45 47 -45 l39 0 0 258 c0 157 -4 273 -11 297
-14 51 -73 110 -124 124 -39 11 -159 13 -200 4z m235 -391 c0 -111 -55 -189
-149 -212 -87 -21 -154 0 -177 55 -18 44 -18 69 1 109 28 59 95 83 238 85 l87
1 0 -38z" />
					<path
						d="M10020 1863 c0 -158 4 -274 11 -298 14 -50 72 -107 126 -123 106 -32
231 -6 301 61 l32 31 0 -25 c0 -58 10 -69 56 -69 l44 0 0 340 0 340 -54 0 -55
0 -3 -237 c-3 -233 -4 -239 -28 -282 -34 -60 -84 -85 -171 -85 -73 0 -106 15
-136 61 -16 24 -18 59 -21 285 l-3 258 -50 0 -49 0 0 -257z" />
					<path d="M14530 1780 l0 -340 50 0 50 0 0 340 0 340 -50 0 -50 0 0 -340z" />
				</g>
			</svg>
			<p>Professor Paulo Cunha</p>
		</header>

		<main>
			<h1>Retificador de meia onda controlado</h1>

			<form id="form" class="form">
				<input
					type="number"
					name="fraction"
					id="fraction"
					placeholder="Fração da onda desejada:"
					min="2"
					max="10"
					value="2" />

				<button id="change" type="submit">Alterar onda</button>
			</form>

			<span id="alert" class="alert">Mudança não enviada ao microcontrolador!</span>

			<div class="waves">
				<div class="wave">
					<h2>Formato da onda de entrada</h2>
					<canvas id="in-wave"></canvas>
				</div>

				<div class="wave">
					<h2>Formato da onda de saída</h2>
					<canvas id="out-wave"></canvas>
				</div>
			</div>
		</main>

		<script>
			const input = document.getElementById("fraction");
			const form = document.getElementById("form");
			const alertBox = document.getElementById("alert");

			form.onsubmit = (ev) => {
				ev.preventDefault();
				alertBox.style.display = "none";

				fraction = Number(input.value);

				// Atualiza o state local
				outWaveShape.period = outWaveShape.compute(fraction);
				createWave("out-wave", outWaveShape);

				// Envia troca de fração para API
				fetch(`/change?fraction=${fraction}`)
					.then((res) => {
						if (res.ok) return;

						alertBox.style.display = "flex";
						alertBox.innerText = "Mudança não enviada ao microcontrolador!";
						console.error("Não foi possível contactar a API.");
					})
					.catch((err) => {
						alertBox.style.display = "flex";
						alertBox.innerText = "Mudança não enviada ao microcontrolador!";
						console.error("Não foi possível contactar a API:", err);
					});
			};
		</script>

		<script>
			let amplitude = 100;
			let fraction = 2;

			const inWaveShape = {
				period: 70,
				width: 70,
				first: 1,
				second: 0,
			};

			const outWaveShape = {
				// Função exponencial negativa (divide o número por 2 n vezes)
				period: Math.floor(70 / 2 ** (fraction - 1)),
				width: 70,
				first: 1,
				second: 0,

				compute: (fraction) => Math.floor(70 / 2 ** (fraction - 1)),
			};
		</script>

		<script>
			function wave(shape, periodStarted) {
				return (periodStarted ? shape.first : shape.second) * amplitude;
			}

			function createWave(id, shape) {
				const canvas = document.getElementById(id);
				const ctx = canvas.getContext("2d");

				canvas.width = 310;
				canvas.height = 200;

				ctx.beginPath();
				ctx.moveTo(0, canvas.height / 2);

				for (let a = 0; a < canvas.width; a++) {
					const periodStarted = a % shape.period === 0;

					const value = wave(shape, periodStarted);

					if (periodStarted) {
						for (let b = 0; b < shape.width; b++) {
							ctx.lineTo(a + b, canvas.height / 2 + value);
						}
						a += shape.width;
					} else {
						ctx.lineTo(a, canvas.height / 2 + value);
					}
				}

				ctx.stroke();
				ctx.closePath();
			}

			createWave("in-wave", inWaveShape);
			createWave("out-wave", outWaveShape);
		</script>
	</body>
</html>
)rawliteral";